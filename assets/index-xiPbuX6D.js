(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();const y=-1,V=0,q=1,x=2,I=0,T=1;function m(e){return e==null?y:typeof e=="string"?e===""?y:V:e instanceof Array?e.length==0||e.some(t=>typeof t!="string")?y:q:e instanceof Date?isNaN(e.getDate())?y:x:y}function S(e,t){return t.toString().slice(0,e).padStart(e,"0")}function $(e){const t=S(4,e.getFullYear()),n=S(2,e.getMonth()+1),r=S(2,e.getDate());return t+n+r}function L(e,t){return e.includes(",")?e:v(e.split(" "),t)}function v(e,t){if(e.length<2)return e[0];switch(t){case I:return`${e[e.length-1]},${e[0]}`;case T:return`${e[0]},${e[e.length-1]}`}}function g(e,t){return t===V}function U(e,t){return t===q}function ae(e,t){return t===x}function j(e){const t={},n=m(e.address);g(e.address,n)&&(t.ADR=e.address);const r=m(e.birthday);if(g(e.birthday,r)){const c=new Date(e.birthday);m(c)!==y&&(t.BDAY=$(c))}ae(e.birthday,r)&&(t.BDAY=$(e.birthday));const i=m(e.birthday);g(e.email,i)&&e.email.includes("@")&&(t.EMAIL=e.email);const o=m(e.name);g(e.name,o)&&(t.N=L(e.name,I)),U(e.name,o)&&(t.N=v(e.name,I));const s=m(e.nickname);g(e.nickname,s)&&(t.NICKNAME=e.nickname);const l=m(e.note);g(e.note,l)&&(t.NOTE=e.note);const a=m(e.kanaName);g(e.kanaName,a)&&(t.SOUND=L(e.kanaName,T)),U(e.kanaName,a)&&(t.SOUND=v(e.kanaName,T));const u=m(e.telephoneNumber);g(e.telephoneNumber,u)&&(t.TEL=e.telephoneNumber);const h=m(e.videophoneNumber);g(e.videophoneNumber,h)&&(t["TEL-AV"]=e.videophoneNumber);const f=m(e.homePage);return g(e.homePage,f)&&URL.canParse(e.homePage)&&(t.URL=e.homePage),t}function H(e){const t="MECARD:",n=";;",r=Object.entries(e).map(([i,o])=>`${i}:${o}`).join(";");return`${t}${r}${n}`}var N=(e=>(e[e.Border=-1]="Border",e[e.Data=0]="Data",e[e.Function=1]="Function",e[e.Position=2]="Position",e[e.Timing=3]="Timing",e[e.Alignment=4]="Alignment",e))(N||{}),le=Object.defineProperty,ue=(e,t,n)=>t in e?le(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P=(e,t,n)=>(ue(e,typeof t!="symbol"?t+"":t,n),n);const fe=[0,1],G=[1,0],K=[2,3],X=[3,2],ce={L:fe,M:G,Q:K,H:X},he=/^[0-9]*$/,de=/^[A-Z0-9 $%*+.\/:-]*$/,_="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",k=1,B=40,Y=3,me=3,z=40,ge=10,J=[[-1,7,10,15,20,26,18,20,24,30,18,20,24,26,30,22,24,28,30,28,28,28,28,30,30,26,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,10,16,26,18,24,16,18,22,22,26,30,22,22,24,24,28,28,26,26,26,26,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28,28],[-1,13,22,18,26,18,24,18,22,20,24,28,26,24,20,30,24,28,28,26,30,28,30,30,30,30,28,30,30,30,30,30,30,30,30,30,30,30,30,30,30],[-1,17,28,22,16,22,28,26,26,24,28,24,28,22,24,24,30,28,28,26,28,30,24,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30,30]],W=[[-1,1,1,1,1,1,2,2,2,2,4,4,4,4,4,6,6,6,6,7,8,8,9,9,10,12,12,12,13,14,15,16,17,18,19,19,20,21,22,24,25],[-1,1,1,1,2,2,4,4,4,5,5,5,8,9,9,10,10,11,13,14,16,17,17,18,20,21,23,25,26,28,29,31,33,35,37,38,40,43,45,47,49],[-1,1,1,2,2,4,4,6,6,8,8,8,10,12,16,12,17,16,18,21,20,23,23,25,27,29,34,34,35,38,40,43,45,48,51,53,56,59,62,65,68],[-1,1,1,2,4,4,4,5,6,8,8,11,11,16,16,18,16,19,21,25,25,25,34,30,32,35,37,40,42,45,48,51,54,57,60,63,66,70,74,77,81]];class pe{constructor(t,n,r,i){if(this.version=t,this.ecc=n,P(this,"size"),P(this,"mask"),P(this,"modules",[]),P(this,"types",[]),t<k||t>B)throw new RangeError("Version value out of range");if(i<-1||i>7)throw new RangeError("Mask value out of range");this.size=t*4+17;const o=Array.from({length:this.size},()=>!1);for(let l=0;l<this.size;l++)this.modules.push(o.slice()),this.types.push(o.map(()=>0));this.drawFunctionPatterns();const s=this.addEccAndInterleave(r);if(this.drawCodewords(s),i===-1){let l=1e9;for(let a=0;a<8;a++){this.applyMask(a),this.drawFormatBits(a);const u=this.getPenaltyScore();u<l&&(i=a,l=u),this.applyMask(a)}}this.mask=i,this.applyMask(i),this.drawFormatBits(i)}getModule(t,n){return t>=0&&t<this.size&&n>=0&&n<this.size&&this.modules[n][t]}drawFunctionPatterns(){for(let r=0;r<this.size;r++)this.setFunctionModule(6,r,r%2===0,N.Timing),this.setFunctionModule(r,6,r%2===0,N.Timing);this.drawFinderPattern(3,3),this.drawFinderPattern(this.size-4,3),this.drawFinderPattern(3,this.size-4);const t=this.getAlignmentPatternPositions(),n=t.length;for(let r=0;r<n;r++)for(let i=0;i<n;i++)r===0&&i===0||r===0&&i===n-1||r===n-1&&i===0||this.drawAlignmentPattern(t[r],t[i]);this.drawFormatBits(0),this.drawVersion()}drawFormatBits(t){const n=this.ecc[1]<<3|t;let r=n;for(let o=0;o<10;o++)r=r<<1^(r>>>9)*1335;const i=(n<<10|r)^21522;for(let o=0;o<=5;o++)this.setFunctionModule(8,o,E(i,o));this.setFunctionModule(8,7,E(i,6)),this.setFunctionModule(8,8,E(i,7)),this.setFunctionModule(7,8,E(i,8));for(let o=9;o<15;o++)this.setFunctionModule(14-o,8,E(i,o));for(let o=0;o<8;o++)this.setFunctionModule(this.size-1-o,8,E(i,o));for(let o=8;o<15;o++)this.setFunctionModule(8,this.size-15+o,E(i,o));this.setFunctionModule(8,this.size-8,!0)}drawVersion(){if(this.version<7)return;let t=this.version;for(let r=0;r<12;r++)t=t<<1^(t>>>11)*7973;const n=this.version<<12|t;for(let r=0;r<18;r++){const i=E(n,r),o=this.size-11+r%3,s=Math.floor(r/3);this.setFunctionModule(o,s,i),this.setFunctionModule(s,o,i)}}drawFinderPattern(t,n){for(let r=-4;r<=4;r++)for(let i=-4;i<=4;i++){const o=Math.max(Math.abs(i),Math.abs(r)),s=t+i,l=n+r;s>=0&&s<this.size&&l>=0&&l<this.size&&this.setFunctionModule(s,l,o!==2&&o!==4,N.Position)}}drawAlignmentPattern(t,n){for(let r=-2;r<=2;r++)for(let i=-2;i<=2;i++)this.setFunctionModule(t+i,n+r,Math.max(Math.abs(i),Math.abs(r))!==1,N.Alignment)}setFunctionModule(t,n,r,i=N.Function){this.modules[n][t]=r,this.types[n][t]=i}addEccAndInterleave(t){const n=this.version,r=this.ecc;if(t.length!==R(n,r))throw new RangeError("Invalid argument");const i=W[r[0]][n],o=J[r[0]][n],s=Math.floor(F(n)/8),l=i-s%i,a=Math.floor(s/i),u=[],h=ze(o);for(let c=0,b=0;c<i;c++){const A=t.slice(b,b+a-o+(c<l?0:1));b+=A.length;const se=Re(A,h);c<l&&A.push(0),u.push(A.concat(se))}const f=[];for(let c=0;c<u[0].length;c++)u.forEach((b,A)=>{(c!==a-o||A>=l)&&f.push(b[c])});return f}drawCodewords(t){if(t.length!==Math.floor(F(this.version)/8))throw new RangeError("Invalid argument");let n=0;for(let r=this.size-1;r>=1;r-=2){r===6&&(r=5);for(let i=0;i<this.size;i++)for(let o=0;o<2;o++){const s=r-o,a=(r+1&2)===0?this.size-1-i:i;!this.types[a][s]&&n<t.length*8&&(this.modules[a][s]=E(t[n>>>3],7-(n&7)),n++)}}}applyMask(t){if(t<0||t>7)throw new RangeError("Mask value out of range");for(let n=0;n<this.size;n++)for(let r=0;r<this.size;r++){let i;switch(t){case 0:i=(r+n)%2===0;break;case 1:i=n%2===0;break;case 2:i=r%3===0;break;case 3:i=(r+n)%3===0;break;case 4:i=(Math.floor(r/3)+Math.floor(n/2))%2===0;break;case 5:i=r*n%2+r*n%3===0;break;case 6:i=(r*n%2+r*n%3)%2===0;break;case 7:i=((r+n)%2+r*n%3)%2===0;break;default:throw new Error("Unreachable")}!this.types[n][r]&&i&&(this.modules[n][r]=!this.modules[n][r])}}getPenaltyScore(){let t=0;for(let o=0;o<this.size;o++){let s=!1,l=0;const a=[0,0,0,0,0,0,0];for(let u=0;u<this.size;u++)this.modules[o][u]===s?(l++,l===5?t+=Y:l>5&&t++):(this.finderPenaltyAddHistory(l,a),s||(t+=this.finderPenaltyCountPatterns(a)*z),s=this.modules[o][u],l=1);t+=this.finderPenaltyTerminateAndCount(s,l,a)*z}for(let o=0;o<this.size;o++){let s=!1,l=0;const a=[0,0,0,0,0,0,0];for(let u=0;u<this.size;u++)this.modules[u][o]===s?(l++,l===5?t+=Y:l>5&&t++):(this.finderPenaltyAddHistory(l,a),s||(t+=this.finderPenaltyCountPatterns(a)*z),s=this.modules[u][o],l=1);t+=this.finderPenaltyTerminateAndCount(s,l,a)*z}for(let o=0;o<this.size-1;o++)for(let s=0;s<this.size-1;s++){const l=this.modules[o][s];l===this.modules[o][s+1]&&l===this.modules[o+1][s]&&l===this.modules[o+1][s+1]&&(t+=me)}let n=0;for(const o of this.modules)n=o.reduce((s,l)=>s+(l?1:0),n);const r=this.size*this.size,i=Math.ceil(Math.abs(n*20-r*10)/r)-1;return t+=i*ge,t}getAlignmentPatternPositions(){if(this.version===1)return[];{const t=Math.floor(this.version/7)+2,n=this.version===32?26:Math.ceil((this.version*4+4)/(t*2-2))*2,r=[6];for(let i=this.size-7;r.length<t;i-=n)r.splice(1,0,i);return r}}finderPenaltyCountPatterns(t){const n=t[1],r=n>0&&t[2]===n&&t[3]===n*3&&t[4]===n&&t[5]===n;return(r&&t[0]>=n*4&&t[6]>=n?1:0)+(r&&t[6]>=n*4&&t[0]>=n?1:0)}finderPenaltyTerminateAndCount(t,n,r){return t&&(this.finderPenaltyAddHistory(n,r),n=0),n+=this.size,this.finderPenaltyAddHistory(n,r),this.finderPenaltyCountPatterns(r)}finderPenaltyAddHistory(t,n){n[0]===0&&(t+=this.size),n.pop(),n.unshift(t)}}function M(e,t,n){if(t<0||t>31||e>>>t)throw new RangeError("Value out of range");for(let r=t-1;r>=0;r--)n.push(e>>>r&1)}function E(e,t){return(e>>>t&1)!==0}class D{constructor(t,n,r){if(this.mode=t,this.numChars=n,this.bitData=r,n<0)throw new RangeError("Invalid argument");this.bitData=r.slice()}getData(){return this.bitData.slice()}}const be=[1,10,12,14],Ee=[2,9,11,13],Me=[4,8,16,16];function Z(e,t){return e[Math.floor((t+7)/17)+1]}function Q(e){const t=[];for(const n of e)M(n,8,t);return new D(Me,e.length,t)}function we(e){if(!ee(e))throw new RangeError("String contains non-numeric characters");const t=[];for(let n=0;n<e.length;){const r=Math.min(e.length-n,3);M(Number.parseInt(e.substring(n,n+r),10),r*3+1,t),n+=r}return new D(be,e.length,t)}function ye(e){if(!te(e))throw new RangeError("String contains unencodable characters in alphanumeric mode");const t=[];let n;for(n=0;n+2<=e.length;n+=2){let r=_.indexOf(e.charAt(n))*45;r+=_.indexOf(e.charAt(n+1)),M(r,11,t)}return n<e.length&&M(_.indexOf(e.charAt(n)),6,t),new D(Ee,e.length,t)}function Ne(e){return e===""?[]:ee(e)?[we(e)]:te(e)?[ye(e)]:[Q(Pe(e))]}function ee(e){return he.test(e)}function te(e){return de.test(e)}function Ae(e,t){let n=0;for(const r of e){const i=Z(r.mode,t);if(r.numChars>=1<<i)return Number.POSITIVE_INFINITY;n+=4+i+r.bitData.length}return n}function Pe(e){e=encodeURI(e);const t=[];for(let n=0;n<e.length;n++)e.charAt(n)!=="%"?t.push(e.charCodeAt(n)):(t.push(Number.parseInt(e.substring(n+1,n+3),16)),n+=2);return t}function F(e){if(e<k||e>B)throw new RangeError("Version number out of range");let t=(16*e+128)*e+64;if(e>=2){const n=Math.floor(e/7)+2;t-=(25*n-10)*n-55,e>=7&&(t-=36)}return t}function R(e,t){return Math.floor(F(e)/8)-J[t[0]][e]*W[t[0]][e]}function ze(e){if(e<1||e>255)throw new RangeError("Degree out of range");const t=[];for(let r=0;r<e-1;r++)t.push(0);t.push(1);let n=1;for(let r=0;r<e;r++){for(let i=0;i<t.length;i++)t[i]=O(t[i],n),i+1<t.length&&(t[i]^=t[i+1]);n=O(n,2)}return t}function Re(e,t){const n=t.map(r=>0);for(const r of e){const i=r^n.shift();n.push(0),t.forEach((o,s)=>n[s]^=O(o,i))}return n}function O(e,t){if(e>>>8||t>>>8)throw new RangeError("Byte out of range");let n=0;for(let r=7;r>=0;r--)n=n<<1^(n>>>7)*285,n^=(t>>>r&1)*e;return n}function Ce(e,t,n=1,r=40,i=-1,o=!0){if(!(k<=n&&n<=r&&r<=B)||i<-1||i>7)throw new RangeError("Invalid value");let s,l;for(s=n;;s++){const f=R(s,t)*8,c=Ae(e,s);if(c<=f){l=c;break}if(s>=r)throw new RangeError("Data too long")}for(const f of[G,K,X])o&&l<=R(s,f)*8&&(t=f);const a=[];for(const f of e){M(f.mode[0],4,a),M(f.numChars,Z(f.mode,s),a);for(const c of f.getData())a.push(c)}const u=R(s,t)*8;M(0,Math.min(4,u-a.length),a),M(0,(8-a.length%8)%8,a);for(let f=236;a.length<u;f^=253)M(f,8,a);const h=Array.from({length:Math.ceil(a.length/8)},()=>0);return a.forEach((f,c)=>h[c>>>3]|=f<<7-(c&7)),new pe(s,t,h,i)}function Se(e,t){var f;const{ecc:n="L",boostEcc:r=!1,minVersion:i=1,maxVersion:o=40,maskPattern:s=-1,border:l=1}=t||{},a=typeof e=="string"?Ne(e):Array.isArray(e)?[Q(e)]:void 0;if(!a)throw new Error(`uqr only supports encoding string and binary data, but got: ${typeof e}`);const u=Ce(a,ce[n],i,o,s,r),h=_e({version:u.version,maskPattern:u.mask,size:u.size,data:u.modules,types:u.types},l);return t!=null&&t.invert&&(h.data=h.data.map(c=>c.map(b=>!b))),(f=t==null?void 0:t.onEncoded)==null||f.call(t,h),h}function _e(e,t=1){if(!t)return e;const{size:n}=e,r=n+t*2;e.size=r,e.data.forEach(o=>{for(let s=0;s<t;s++)o.unshift(!1),o.push(!1)});for(let o=0;o<t;o++)e.data.unshift(Array.from({length:r},s=>!1)),e.data.push(Array.from({length:r},s=>!1));const i=N.Border;e.types.forEach(o=>{for(let s=0;s<t;s++)o.unshift(i),o.push(i)});for(let o=0;o<t;o++)e.types.unshift(Array.from({length:r},s=>i)),e.types.push(Array.from({length:r},s=>i));return e}function ne(e,t={}){const n=Se(e,t),{pixelSize:r=10,whiteColor:i="white",blackColor:o="black"}=t,s=n.size*r,l=n.size*r;let a=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 ${l} ${s}">`;const u=[];for(let h=0;h<n.size;h++)for(let f=0;f<n.size;f++){const c=f*r,b=h*r;n.data[h][f]&&u.push(`M${c},${b}h${r}v${r}h-${r}z`)}return a+=`<rect fill="${i}" width="${l}" height="${s}"/>`,a+=`<path fill="${o}" d="${u.join("")}"/>`,a+="</svg>",a}function Ie(e){const t=H(e);return ve(ne(t))}function Te(e,t){const n=ne(H(t));e.innerHTML=n}function ve(e){const t=document.createElement("svg");return t.innerHTML=e,t}function re(e,t){const n=document.createElement("button");return n.id="button",n.innerText=e,n.onclick=t||null,n}function Fe(e){const t=localStorage.getItem(e);if(t!==null)try{const n=JSON.parse(t);if(n instanceof Object&&!(n instanceof Array))return n}catch(n){console.error(n)}return{}}function Oe(e,t){try{const n=JSON.stringify(t);localStorage.setItem(e,n)}catch(n){console.error(n)}}function d(e){return!(e==null||typeof e=="string"&&e.length===0||e instanceof Array&&e.length===0)}function ke(e,t){var s;const n=Be(t),r=document.createElement("dialog"),i=document.createElement("form");i.method="dialog",i.append(...w("name",void 0,(s=n.name)==null?void 0:s.toString())),i.append(...w("nickname",void 0,n.nickname)),i.append(...w("telephoneNumber","phone number",n.telephoneNumber)),i.append(...w("email",void 0,n.email)),i.append(...w("address",void 0,n.address)),i.append(...w("note",void 0,n.note)),i.append(...w("homePage","home page",n.homePage));const o=re("Save",()=>{const l=[...i.elements].filter(a=>a instanceof HTMLInputElement&&d(a.value)).reduce((a,u)=>{if(u instanceof HTMLInputElement){const h=u.getAttribute("x-data-key"),f=u.value;d(h)&&d(f)&&(a[h]=f)}return a},{});Oe(e,l)});return i.append(o),r.append(i),r.id="dialog",r}function w(e,t,n){const r=document.createElement("label"),i=document.createElement("input");return r.htmlFor=`input-${e}`,r.innerText=t||e,r.title=t||e,i.type="text",d(n)&&(i.defaultValue=n),i.name=`input-${e}`,i.setAttribute("x-data-key",e),[r,i]}function Be(e){const t={};return d(e)&&(d(e.address)&&(t.address=e.address),d(e.birthday)&&(t.birthday=e.birthday),d(e.email)&&(t.email=e.email),d(e.name)&&(t.name=e.name),d(e.nickname)&&(t.nickname=e.nickname),d(e.note)&&(t.note=e.note),d(e.kanaName)&&(t.kanaName=e.kanaName),d(e.telephoneNumber)&&(t.telephoneNumber=e.telephoneNumber),d(e.videophoneNumber)&&(t.videophoneNumber=e.videophoneNumber),d(e.homePage)&&(t.homePage=e.homePage)),t}function De(e,t=1){const n=document.createElement(`h${t}`);return n.innerText=e,n.id="title",n}function $e(e){return Fe(e)}function Le(e){return Ie(j(e))}const C={data:{}},p={};function ie(){C.data=$e("qrThing")}function Ue(){p.title=De("QR-thing"),p.qr=Le(C.data),p.dialog=ke("qrThing",C.data),p.options=re("options",()=>{p.dialog.showModal()})}function Ye(e){e.append(p.title,p.options,p.qr,p.dialog)}const oe=document.querySelector("#app");ie();Ue();Ye(oe);oe.onsubmit=()=>{ie(),Te(p.qr,j(C.data))};
